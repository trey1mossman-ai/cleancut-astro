---
import '../styles/global.css'
import EstimateModal from '../components/EstimateModal.astro';
import LocalBusinessSchema from '../components/schema/LocalBusinessSchema.astro';
import { schemaData, getOpeningHoursSpecification, getSameAsLinks } from '../data/schema';

interface Props {
  title: string;
  description?: string;
}

const {
  title,
  description = "Transform your space with Clean Cut's professional painting and handyman services in Decatur and Springfield IL. Interior & exterior painting, cabinet refinishing, deck staining. Free estimates!"
} = Astro.props;

// Prepare schema data for LocalBusinessSchema component
const businessSchemaProps = {
  businessName: schemaData.business.name,
  description: schemaData.business.description,
  url: schemaData.contact.website,
  logo: `${schemaData.contact.website}/logo.webp`,
  image: `${schemaData.contact.website}/images/hero.webp`,
  priceRange: schemaData.schema.price_range,
  locations: schemaData.locations.map(loc => ({
    name: loc.name,
    streetAddress: loc.streetAddress,
    city: loc.city,
    state: loc.state,
    postalCode: loc.postalCode,
    country: loc.country,
    telephone: loc.telephone,
    latitude: loc.latitude,
    longitude: loc.longitude
  })),
  openingHours: getOpeningHoursSpecification(schemaData.hours),
  sameAs: getSameAsLinks(schemaData.social),
  areaServed: schemaData.service_areas.primary.map(area => `${area.name}, ${area.state}`)
};
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <meta name="google-site-verification" content="vkBXOZH12j-RM2eMzRVJQSlp1B2CF0QHYECTYZBkc_E" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title}</title>
  <meta name="description" content={description} />
  <link rel="canonical" href={`${schemaData.contact.website}${Astro.url.pathname}`} />
  
  <!-- Open Graph -->
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="website" />
  <meta property="og:url" content={`${schemaData.contact.website}${Astro.url.pathname}`} />
  <meta property="og:image" content={`${schemaData.contact.website}/images/CleanCut Image-3.webp`} />
  <meta property="og:site_name" content="Clean Cut Painting & Handyman" />
  <meta property="og:locale" content="en_US" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={`${schemaData.contact.website}/images/CleanCut Image-3.webp`} />
  
  <!-- Geo SEO -->
  <meta name="geo.region" content="US-IL" />
  <meta name="geo.placename" content="Decatur, Illinois" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Structured Data: LocalBusiness -->
  <LocalBusinessSchema {...businessSchemaProps} />
</head>
<body>
  <div class="min-h-screen bg-white">
    <slot />
  </div>
  <EstimateModal />
  
  <!-- reCAPTCHA v3 -->
  <script is:inline src="https://www.google.com/recaptcha/api.js?render=6LeBhlArAAAAAK4QNqNpQmU3g0YBnviLRoFk6kqw"></script>
  <script is:inline src="/js/grecaptchav3.js"></script>
</body>
</html>
